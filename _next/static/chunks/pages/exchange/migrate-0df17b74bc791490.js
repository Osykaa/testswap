(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6515],{58173:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.signERC2612Permit=t.signDaiPermit=void 0;const a=n(20772),o=n(44625),i="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",s=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],c=e=>"".padEnd(e,"0"),l=(e,t)=>r(void 0,void 0,void 0,(function*(){return o.hexToUtf8((yield a.call(e,t,"0x06fdde03")).substr(130))})),d=(e,t)=>r(void 0,void 0,void 0,(function*(){if("string"!==typeof t)return t;const n=t,[r,o]=yield Promise.all([l(e,n),a.getChainId(e)]);return{name:r,version:"1",chainId:o,verifyingContract:n}}));t.signDaiPermit=(e,t,n,o,l,u)=>r(void 0,void 0,void 0,(function*(){const r=t.verifyingContract||t,f={holder:n,spender:o,nonce:u||(yield a.call(e,r,`0x7ecebe00${c(24)}${n.substr(2)}`)),expiry:l||i,allowed:!0},p=((e,t)=>({types:{EIP712Domain:s,Permit:[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}]},primaryType:"Permit",domain:t,message:e}))(f,yield d(e,t)),m=yield a.signData(e,n,p);return Object.assign(Object.assign({},m),f)})),t.signERC2612Permit=(e,t,n,o,l=i,u,f)=>r(void 0,void 0,void 0,(function*(){const r=t.verifyingContract||t,p={owner:n,spender:o,value:l,nonce:f||(yield a.call(e,r,`0x7ecebe00${c(24)}${n.substr(2)}`)),deadline:u||i},m=((e,t)=>({types:{EIP712Domain:s,Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},primaryType:"Permit",domain:t,message:e}))(p,yield d(e,t)),v=yield a.signData(e,n,m);return Object.assign(Object.assign({},v),p)}))},44625:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hexToUtf8=void 0;const a=r(n(57458));t.hexToUtf8=function(e){let t="",n=0,r=(e=(e=(e=(e=(e=e.replace(/^0x/i,"")).replace(/^(?:00)*/,"")).split("").reverse().join("")).replace(/^(?:00)*/,"")).split("").reverse().join("")).length;for(let a=0;a<r;a+=2)n=parseInt(e.substr(a,2),16),t+=String.fromCharCode(n);return a.default.decode(t)}},20772:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.call=t.getChainId=t.setChainIdOverride=t.signData=t.send=void 0;t.send=(e,t,n)=>new Promise(((r,a)=>{const o={id:Math.floor(1e10*Math.random()),method:t,params:n},i=(e,t)=>{e?a(e):t.error?(console.error(t.error),a(t.error)):r(t.result)};let s=e.provider||e;s.sendAsync?s.sendAsync(o,i):s.send(o,i).catch((e=>{if("Hardhat Network doesn't support JSON-RPC params sent as an object"!==e.message)throw e;s.send(t,n).then((e=>r(e))).catch((e=>a(e)))}))})),t.signData=(e,r,a)=>n(void 0,void 0,void 0,(function*(){const n="string"===typeof a?a:JSON.stringify(a),o=yield t.send(e,"eth_signTypedData_v4",[r,n]).catch((n=>{if("Method eth_signTypedData_v4 not supported."===n.message)return t.send(e,"eth_signTypedData",[r,a]);throw n}));return{r:o.slice(0,66),s:"0x"+o.slice(66,130),v:parseInt(o.slice(130,132),16)}}));let r=null;t.setChainIdOverride=e=>{r=e},t.getChainId=e=>n(void 0,void 0,void 0,(function*(){return r||t.send(e,"eth_chainId")})),t.call=(e,n,r)=>t.send(e,"eth_call",[{to:n,data:r},"latest"])},58165:function(e,t,n){"use strict";n(67294);var r=n(85893),a={default:"",blue:"bg-blue bg-opacity-20 outline-blue rounded text-xs text-blue px-2 py-1",pink:"bg-pink bg-opacity-20 outline-pink rounded text-xs text-pink px-2 py-1",gradient:"bg-gradient-to-r from-blue to-pink opacity-80 hover:opacity-100 bg-pink bg-opacity-20 outline-pink rounded text-base text-white px-2 py-1"},o={default:"text-xs",medium:"text-sm",large:"text-lg"};t.ZP=function(e){var t=e.color,n=void 0===t?"default":t,i=e.size,s=void 0===i?"default":i,c=e.children,l=e.className,d=void 0===l?"":l;return(0,r.jsx)("div",{className:"".concat(a[n]," ").concat(o[s]," ").concat(d),children:c})}},52824:function(e,t,n){"use strict";var r=n(4942),a=n(45987),o=n(32025),i=n(85893),s=["children","maxWidth","className"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={full:"max-w-full","7xl":"max-w-7xl","6xl":"max-w-6xl","5xl":"max-w-5xl","4xl":"max-w-4xl","3xl":"max-w-3xl","2xl":"max-w-2xl",xl:"max-w-xl",lg:"max-w-lg",md:"max-w-md",sm:"max-w-sm",xs:"max-w-xs"};t.Z=function(e){var t=e.children,n=e.maxWidth,r=void 0===n?"2xl":n,c=e.className,u=void 0===c?"":c,f=(0,a.Z)(e,s);return(0,i.jsx)("div",l(l({className:(0,o.AK)(u,d[r],"w-full")},f),{},{children:t}))}},3382:function(e,t,n){"use strict";var r=n(59359),a=n(32025),o=n(85893);t.Z=function(e){var t=e.children,n=e.className;return r.tq?(0,o.jsx)("div",{className:"shadow-swap",children:t}):(0,o.jsxs)("div",{className:(0,a.AK)(n,"relative w-full max-w-2xl"),children:[(0,o.jsx)("div",{className:"absolute top-1/4 -left-10 bg-blue bottom-4 w-3/5 rounded-full z-0 filter blur-[150px]"}),(0,o.jsx)("div",{className:"absolute bottom-1/4 -right-10 bg-pink top-4 w-3/5 rounded-full z-0  filter blur-[150px]"}),(0,o.jsx)("div",{className:"relative filter drop-shadow",children:t})]})}},66223:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(26368),a=(n(67294),n(32025)),o=n(85893);function i(e){var t=e.currency0,n=e.currency1,i=e.className,s=void 0===i?"":i,c=e.logoClassName,l=void 0===c?"":c,d=e.size,u=void 0===d?16:d;return(0,o.jsxs)("div",{className:(0,a.AK)("flex items-center space-x-2",s),children:[(0,o.jsx)(r.Z,{className:l,currency:t,size:u.toString()+"px"}),(0,o.jsx)(r.Z,{className:l,currency:n,size:u.toString()+"px"})]})}},66858:function(e,t,n){"use strict";n(67294);var r=n(77062),a=n(85893);t.Z=function(e){var t=e.children,n=e.className,o=void 0===n?"":n;return(0,a.jsx)("div",{className:(0,r.A)("flex flex-col justify-center items-center py-4 px-3 rounded min-h-empty",o),children:t})}},20651:function(e,t,n){"use strict";n.d(t,{I:function(){return f}});var r=n(4942),a=n(45987),o=n(32025),i=n(67294),s=n(85893),c=["value","onUserInput","placeholder","className"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=RegExp("^\\d*(?:\\\\[.])?\\d*$"),f=i.memo((function(e){var t=e.value,n=e.onUserInput,r=e.placeholder,i=e.className,l=void 0===i?"w-0 p-0 text-2xl bg-transparent":i,f=(0,a.Z)(e,c);return(0,s.jsx)("input",d(d({},f),{},{value:t,onChange:function(e){var t;(""===(t=e.target.value.replace(/,/g,"."))||u.test((0,o.hr)(t)))&&n(t)},inputMode:"decimal",title:"Token Amount",autoComplete:"off",autoCorrect:"off",type:"text",pattern:"^[0-9]*[.,]?[0-9]*$",placeholder:r||"0.0",min:0,minLength:1,maxLength:79,spellCheck:"false",className:(0,o.AK)("relative font-bold outline-none border-none flex-auto overflow-hidden overflow-ellipsis placeholder-low-emphesis focus:placeholder-primary",l)}))}));f.displayName="NumericalInput"},12868:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var r=n(15861),a=n(86854),o=n(87757),i=n.n(o),s=n(27262),c=n(71862),l=n(84772),d=n(63801),u=n(67294),f=n(61744),p=n(4942),m=n(68411),v=n(41451),h=n(47083),g=n(19485),x=n(11178),y=n(62483);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(){var e=(0,x.a)(),t=e.account,n=e.chainId,a=(0,h.HW)(),o=(0,h.VN)(),s=(0,h.Y1)(),c=(0,u.useState)([]),d=c[0],f=c[1],m=(0,u.useState)(),b=m[0],w=m[1],j=(0,u.useState)(!1),_=j[0],P=j[1],O=(0,u.useState)(!0),T=O[0],N=O[1],A=(0,y.e_)(),S=(0,u.useRef)(!1),L=(0,u.useCallback)((0,r.Z)(i().mark((function e(){var r,c,d,u,m,h,x,y,b,w,j,_,P,O,T,L,C,Z,I,E,M,D,U,B,q,W,Q,R,z,V,K;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S.current=!0,l.a_.MATIC!==n){e.next=24;break}return r=500,e.next=6,null===s||void 0===s?void 0:s.allPairsLength();case 6:for(c=e.sent,d=[],u=0;u<c;u+=r)d.push(u);return e.next=11,Promise.all(d.map((function(e){return null===a||void 0===a?void 0:a.getPairs("0x5757371414417b8C6CAad45bAeF941aBc7d3Ab32",e,Math.min(e+r,c.toNumber()))})));case 11:return m=e.sent.flat().filter((function(e){return"0x1f6c3E047f529f82f743a7378A212a3d62fAA390"!==e.token0})),h=m.map((function(e){return e[0]})),e.next=15,null===a||void 0===a?void 0:a.pollPairs(t,h);case 15:return x=e.sent,y=Array.from(new Set(m.reduce((function(e,t){return e.push(t.token,t.token0,t.token1)&&e}),[]))).flat(),e.next=19,null===a||void 0===a?void 0:a.getTokenInfo(y);case 19:b=e.sent.reduce((function(e,t){return e[t[0]]=t,e}),{}),(w=m.map((function(e,t){var r=new l.WU(n,b[e.token].token,b[e.token].decimals,b[e.token].symbol,b[e.token].name),a=b[e.token0],o=b[e.token1];return{address:r.address,decimals:r.decimals,name:r.name,symbol:r.symbol,balance:l.ih.fromRawAmount(r,x[t].balance),totalSupply:e.totalSupply,tokenA:new l.WU(n,a.token,a.decimals,a.symbol,a.name),tokenB:new l.WU(n,o.token,o.decimals,o.symbol,o.name)}})))&&f(w),e.next=62;break;case 24:if(!n||![l.a_.MAINNET,l.a_.BSC].includes(n)){e.next=62;break}return j={},(0,p.Z)(j,l.a_.MAINNET,["https://api.covalenthq.com/v1/".concat(l.a_.MAINNET,"/address/").concat(String(t).toLowerCase(),"/stacks/uniswap_v2/balances/?page-size=1000&key=ckey_cba3674f2ce5450f9d5dd290589")]),(0,p.Z)(j,l.a_.BSC,["https://api.covalenthq.com/v1/".concat(l.a_.BSC,"/address/").concat(String(t).toLowerCase(),"/stacks/pancakeswap/balances/?page-size=1000&?key=ckey_cba3674f2ce5450f9d5dd290589"),"https://api.covalenthq.com/v1/".concat(l.a_.BSC,"/address/").concat(String(t).toLowerCase(),"/stacks/pancakeswap_v2/balances/?page-size=1000&?key=ckey_cba3674f2ce5450f9d5dd290589")]),T=j,e.next=28,Promise.all(T[n].map((function(e){return fetch(e)})));case 28:if(L=e.sent,C=[],n!==l.a_.MAINNET){e.next=38;break}return e.next=33,L[0].json();case 33:E=e.sent,M=E.data,C=null===M||void 0===M||null===(Z=M.uniswap_v2)||void 0===Z||null===(I=Z.balances)||void 0===I?void 0:I.filter((function(e){return"0"!==e.pool_token.balance})).map((function(e){return k(k({},e),{},{version:"v2"})})),e.next=48;break;case 38:if(n!==l.a_.BSC){e.next=48;break}return e.next=41,L[0].json();case 41:return W=e.sent,Q=W.data,e.next=45,L[1].json();case 45:R=e.sent,z=R.data,C=[].concat((0,v.Z)(null===Q||void 0===Q||null===(D=Q.pancakeswap)||void 0===D||null===(U=D.balances)||void 0===U?void 0:U.filter((function(e){return"0"!==e.pool_token.balance})).map((function(e){return k(k({},e),{},{version:"v1"})}))),(0,v.Z)(null===z||void 0===z||null===(B=z.pancakeswap)||void 0===B||null===(q=B.balances)||void 0===q?void 0:q.filter((function(e){return"0"!==e.pool_token.balance})).map((function(e){return k(k({},e),{},{version:"v2"})}))));case 48:return e.next=50,null===o||void 0===o?void 0:o.getTokenInfo(Array.from(new Set(null===(P=C)||void 0===P?void 0:P.reduce((function(e,t){return e.push(t.pool_token.contract_address,t.token_0.contract_address,t.token_1.contract_address)&&e}),[]))));case 50:if(e.t1=_=e.sent,e.t0=null===e.t1,e.t0){e.next=54;break}e.t0=void 0===_;case 54:if(!e.t0){e.next=58;break}e.t2=void 0,e.next=59;break;case 58:e.t2=_.reduce((function(e,t){return e[t[0]]=k({},t),e[t[0]].decimals=e[t[0]].decimals.toNumber(),e}),{});case 59:V=e.t2,(K=null===(O=C)||void 0===O?void 0:O.map((function(e){var t=new l.WU(n,(0,g.getAddress)(e.pool_token.contract_address),V[(0,g.getAddress)(e.pool_token.contract_address)].decimals,V[(0,g.getAddress)(e.pool_token.contract_address)].symbol,V[(0,g.getAddress)(e.pool_token.contract_address)].name),r=V[(0,g.getAddress)(e.token_0.contract_address)],a=V[(0,g.getAddress)(e.token_1.contract_address)];return{address:(0,g.getAddress)(e.pool_token.contract_address),decimals:t.decimals,name:"".concat(r.symbol,"-").concat(a.symbol," LP Token"),symbol:"".concat(r.symbol,"-").concat(a.symbol),balance:l.ih.fromRawAmount(t,e.pool_token.balance),totalSupply:e.pool_token.total_supply,tokenA:A[(0,g.getAddress)(e.token_0.contract_address)]||new l.WU(n,r.address||r.token,r.decimals,r.symbol,r.name),tokenB:A[(0,g.getAddress)(e.token_1.contract_address)]||new l.WU(n,a.address||a.token,a.decimals,a.symbol,a.name),version:e.version}})))&&f(K);case 62:return e.prev=62,N(!1),S.current=!1,e.finish(62);case 66:case"end":return e.stop()}}),e,null,[[0,,62,66]])}))),[n,s,a,t,o,A]);return(0,u.useEffect)((function(){n&&t&&a&&!S.current&&L()}),[t,n,a,L]),{updateLPTokens:L,lpTokens:d,selectedLPToken:b,setSelectedLPToken:w,selectedLPTokenAllowed:_,setSelectedLPTokenAllowed:P,loading:T,updatingLPTokens:S.current}},j=n(50542),_=n(21815),P=n(58173),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"v2",t=(0,x.a)(),n=t.chainId,a=t.library,o=t.account,s=(0,h.Uv)(e),c=1200,d="";n===l.a_.MAINNET?d="Uniswap":n===l.a_.BSC&&(d="PancakeSwap");var f=(0,u.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,a,o,l,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=9;break}return a=Math.floor((new Date).getTime()/1e3)+c,o=[t.tokenA.address,t.tokenB.address,n,_.Zero,_.Zero,a],e.next=5,(r=s.estimateGas).migrate.apply(r,o);case 5:return l=e.sent,u=s.migrate.apply(s,o.concat([{gasLimit:l.mul(120).div(100)}])),j.ZP.event({category:"Migrate",action:"".concat(d,"->Sushiswap"),label:"migrate"}),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[s,c,d]),p=(0,u.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,l,u,f,p,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!s){e.next=14;break}return l=Math.floor((new Date).getTime()/1e3)+c,e.next=4,(0,P.signERC2612Permit)(a,t.address,o,s.address,n.toString(),l);case 4:return u=e.sent,f=[t.tokenA.address,t.tokenB.address,n,_.Zero,_.Zero,l,u.v,u.r,u.s],e.next=8,(r=s.estimateGas).migrateWithPermit.apply(r,f);case 8:return p=e.sent,e.next=11,s.migrateWithPermit.apply(s,f.concat([{gasLimit:p.mul(120).div(100)}]));case 11:return m=e.sent,j.ZP.event({category:"Migrate",action:"".concat(d,"->Sushiswap"),label:"migrateWithPermit"}),e.abrupt("return",m);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[o,a,s,c,d]);return{migrate:f,migrateWithPermit:p}};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){var e,t=(0,x.a)(),n=t.library,a=t.account,o=t.chainId,s=w(),c=O(null===s||void 0===s||null===(e=s.selectedLPToken)||void 0===e?void 0:e.version),d=c.migrate,p=c.migrateWithPermit,v=(0,u.useState)(),h=v[0],g=v[1],y=(0,u.useState)(""),b=y[0],k=y[1],j=(0,m.h7)(),_=(0,u.useState)(null),P=_[0],T=_[1],A=(0,m.ub)(null!==P&&void 0!==P?P:void 0);(0,u.useEffect)((function(){s.setSelectedLPToken(void 0)}),[h]);var S=(0,u.useCallback)((0,r.Z)(i().mark((function e(){var t,r,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(h&&s.selectedLPToken&&a&&n)){e.next=14;break}return t=(0,f.parseUnits)(b||"0",s.selectedLPToken.decimals),r="approve"===h?d:p,e.next=5,r(s.selectedLPToken,t);case 5:return c=e.sent,o===l.a_.MAINNET?u="Uniswap":o===l.a_.BSC?u="PancakeSwap":o===l.a_.MATIC&&(u="QuickSwap"),j(c,{summary:"Migrate ".concat(u," ").concat(s.selectedLPToken.symbol," liquidity to SushiSwap")}),T(c.hash),e.next=11,c.wait();case 11:return s.setSelectedLPToken(void 0),e.next=14,s.updateLPTokens();case 14:case"end":return e.stop()}}),e)}))),[h,s,a,n,b,d,p,o,j]);return N(N({},s),{},{amount:b,setAmount:k,mode:h,setMode:g,onMigrate:S,pendingMigrationHash:P,isMigrationPending:A})},S=n(9279),L=n(58165),C=n(52824),Z=n(15097),I=n(66223),E=n(3382),M=n(66858),D=n(9008),U=n(20651),B=n(56785),q=n(63192),W=n(85169),Q=n(85893),R=l.QA.BigInt(0),z=function(e){var t=e.state,n=(0,W.mV)().i18n,r=(0,u.useCallback)((function(){if(t.selectedLPToken){var e=t.selectedLPToken.balance.quotient;if(t.selectedLPToken.address===S.d){var n=l.QA.exponentiate(l.QA.BigInt(10),l.QA.BigInt(16));e=l.QA.greaterThan(e,n)?l.QA.subtract(e,n):R}t.setAmount((0,f.formatUnits)(e.toString(),t.selectedLPToken.decimals))}}),[t]);return(0,u.useEffect)((function(){t.mode&&0!==t.lpTokens.length&&t.selectedLPToken||t.setAmount("")}),[t]),t.lpTokens.length?t.mode&&t.selectedLPToken?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(B.Z,{variant:"sm",className:"text-secondary",children:n._(n._("Amount of Tokens"))}),(0,Q.jsxs)("div",{className:"relative flex items-center w-full mb-4",children:[(0,Q.jsx)(U.I,{className:"w-full p-3 rounded bg-dark-700 focus:ring focus:ring-pink",value:t.amount,onUserInput:function(e){return t.setAmount(e)}}),(0,Q.jsx)(c.ZP,{variant:"outlined",color:"pink",size:"xs",onClick:r,className:"absolute right-4 focus:ring focus:ring-pink",children:n._(n._("MAX"))})]})]}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(B.Z,{variant:"sm",className:"text-secondary",children:"Amount of Tokens"}),(0,Q.jsx)("div",{className:"p-3 text-center rounded cursor-not-allowed bg-dark-800",children:(0,Q.jsx)(B.Z,{variant:"lg",className:"text-secondary",children:t.mode&&0===t.lpTokens.length?"No LP tokens found":"Select an LP Token"})})]}):null},V=function(e){var t=e.lpToken,n=e.onToggle,r=e.isSelected;e.updating,e.exchange;return(0,Q.jsxs)("div",{className:"flex items-center justify-between px-3 py-5 rounded cursor-pointer bg-dark-800 hover:bg-dark-700",onClick:function(){return n(t)},children:[(0,Q.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Q.jsx)(I.Z,{currency0:t.tokenA,currency1:t.tokenB,size:20}),(0,Q.jsx)(B.Z,{variant:"lg",className:"text-primary",children:"".concat(t.tokenA.symbol,"/").concat(t.tokenB.symbol)}),t.version&&(0,Q.jsx)(L.ZP,{color:"pink",children:t.version})]}),r?(0,Q.jsx)(d.b0D,{width:16,height:16}):(0,Q.jsx)(d.v4q,{width:16,height:16})]},t.address)},K=function(e){var t=e.state,n=(0,W.mV)().i18n;var r=[{key:"permit",text:n._(n._("Non-hardware Wallet")),description:n._(n._("Migration is done in one-click using your signature (permit)"))},{key:"approve",text:n._(n._("Hardware Wallet")),description:n._(n._("You need to first approve LP tokens and then migrate it"))}];return(0,Q.jsx)(Q.Fragment,{children:r.reduce((function(e,n){var r=n.key,a=n.text,o=n.description;return void 0!==t.mode&&r!==t.mode||e.push((0,Q.jsxs)("div",{className:"flex items-center justify-between p-3 rounded cursor-pointer bg-dark-800 hover:bg-dark-700",onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t.setMode(e!==t.mode?e:void 0)}(r)},children:[(0,Q.jsxs)("div",{children:[(0,Q.jsx)("div",{children:(0,Q.jsx)(B.Z,{variant:"sm",children:a})}),(0,Q.jsx)("div",{children:(0,Q.jsx)(B.Z,{variant:"sm",className:"text-secondary",children:o})})]}),r===t.mode?(0,Q.jsx)(d.b0D,{width:16,height:16}):(0,Q.jsx)(d.v4q,{width:16,height:16})]},r)),e}),[])})},F=function(e){var t,n,o,d,p,m=e.state,v=e.exchange,g=(0,W.mV)().i18n,x=(0,u.useState)({}),y=x[0],b=x[1],k=(0,h.Uv)(null!==(t=m.selectedLPToken)&&void 0!==t&&t.version?null===(n=m.selectedLPToken)||void 0===n?void 0:n.version:void 0),w=(0,s.qL)(null===(o=m.selectedLPToken)||void 0===o?void 0:o.balance,null===k||void 0===k?void 0:k.address),j=(0,a.Z)(w,2),_=j[0],P=j[1],O=!(null===(d=m.selectedLPToken)||void 0===d||!d.balance)&&(null===(p=m.selectedLPToken)||void 0===p?void 0:p.balance.equalTo(R)),T=!m.amount;if((0,u.useEffect)((function(){b({})}),[m.selectedLPToken]),!m.mode||0===m.lpTokens.length||!m.selectedLPToken||!m.amount)return(0,Q.jsx)(c.gn,{disabled:!0,children:"Migrate"});var N=l.QA.lessThan(m.selectedLPToken.balance.quotient,l.QA.BigInt((0,f.parseUnits)(m.amount||"0",m.selectedLPToken.decimals).toString())),A=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b({}),e.prev=1,e.next=4,m.onMigrate();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),b(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return(0,Q.jsxs)("div",{className:"space-y-4",children:[N?(0,Q.jsx)("div",{className:"text-sm text-primary",children:g._(g._("Insufficient Balance"))}):m.loading?(0,Q.jsx)(Z.Z,{children:g._(g._("Loading"))}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("div",{className:"flex justify-between",children:(0,Q.jsxs)("div",{className:"text-sm text-secondary",children:[g._(g._("Balance")),":"," ",(0,Q.jsx)("span",{className:"text-primary",children:m.selectedLPToken.balance.toSignificant(4)})]})}),"approve"===m.mode&&(0,Q.jsx)(c.gn,{onClick:P,confirmed:_===s.UK.APPROVED,disabled:_!==s.UK.NOT_APPROVED||T,children:_===s.UK.PENDING?(0,Q.jsx)(Z.Z,{children:g._(g._("Approving"))}):_===s.UK.APPROVED?g._(g._("Approved")):g._(g._("Approve"))}),("approve"===m.mode&&_===s.UK.APPROVED||"permit"===m.mode)&&(0,Q.jsx)(c.gn,{disabled:O||m.isMigrationPending||T,onClick:A,children:m.isMigrationPending?(0,Q.jsx)(Z.Z,{children:g._(g._("Migrating"))}):g._(g._("Migrate"))})]}),y.message&&4001!==y.code&&(0,Q.jsx)("div",{className:"font-medium text-center text-red",children:y.message}),(0,Q.jsx)("div",{className:"text-sm text-center text-low-emphesis",children:g._(g._("Your {exchange} {0}/{1} liquidity will become SushiSwap {2}/{3} liquidity.",{0:m.selectedLPToken.tokenA.symbol,1:m.selectedLPToken.tokenB.symbol,2:m.selectedLPToken.tokenA.symbol,3:m.selectedLPToken.tokenB.symbol,exchange:v}))})]})},$=function(e){var t=e.state,n=e.exchange,r=(0,W.mV)().i18n;function a(e){t.setSelectedLPToken(t.selectedLPToken!==e?e:void 0),t.setAmount("")}return t.mode?0===t.lpTokens.length?(0,Q.jsx)(M.Z,{children:r._(r._("No Liquidity found"))}):(0,Q.jsx)(Q.Fragment,{children:t.lpTokens.reduce((function(e,r){return r.balance&&l.QA.greaterThan(r.balance.quotient,l.QA.BigInt(0))&&e.push((0,Q.jsx)(V,{lpToken:r,onToggle:a,isSelected:t.selectedLPToken===r,updating:t.updatingLPTokens,exchange:n})),e}),[])}):null};function Y(){var e,t=(0,W.mV)().i18n,n=(0,x.a)(),r=n.account,a=n.chainId,o=A();return a===l.a_.MAINNET?e="Uniswap":a===l.a_.BSC?e="PancakeSwap":a===l.a_.MATIC&&(e="QuickSwap"),(0,Q.jsxs)(C.Z,{id:"migrate-page",className:"py-4 space-y-6 md:py-8 lg:py-12",maxWidth:"lg",children:[(0,Q.jsxs)(D.default,{children:[(0,Q.jsx)("title",{children:"Migrate | Sushi"}),(0,Q.jsx)("meta",{name:"description",content:"Migrate your liquidity to SushiSwap."},"description")]}),(0,Q.jsx)("div",{className:"mb-8 text-2xl text-center",children:t._(t._("Migrate {exchange} Liquidity",{exchange:e}))}),(0,Q.jsx)(E.Z,{children:(0,Q.jsx)("div",{className:"p-4 space-y-4 rounded bg-dark-900",children:r?o.loading?(0,Q.jsx)(B.Z,{variant:"lg",className:"p-4 text-center text-primary",children:(0,Q.jsx)(Z.Z,{children:t._(t._("Loading your {exchange} liquidity positions",{exchange:e}))})}):(0,Q.jsxs)(Q.Fragment,{children:[!o.loading&&(0,Q.jsx)(B.Z,{variant:"lg",children:t._(t._("Your Wallet"))}),(0,Q.jsx)(K,{state:o}),!o.loading&&o.lpTokens.length>0&&(0,Q.jsxs)("div",{children:[(0,Q.jsx)(B.Z,{variant:"lg",children:t._(t._("Your Liquidity"))}),(0,Q.jsx)(B.Z,{variant:"sm",className:"text-secondary",children:t._("Click on a pool below, input the amount you wish to migrate or select max, and click\nmigrate")})]}),(0,Q.jsx)($,{state:o,exchange:e}),(0,Q.jsx)(z,{state:o}),o.selectedLPToken&&(0,Q.jsx)(F,{state:o,exchange:e})]}):(0,Q.jsx)(q.Z,{color:"blue",className:"w-full"})})})]})}},85313:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exchange/migrate",function(){return n(12868)}])},57458:function(e,t){!function(e){var t,n,r,a=String.fromCharCode;function o(e){for(var t,n,r=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function i(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function s(e,t){return a(e>>t&63|128)}function c(e){if(0==(4294967168&e))return a(e);var t="";return 0==(4294965248&e)?t=a(e>>6&31|192):0==(4294901760&e)?(i(e),t=a(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=a(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=a(63&e|128)}function l(){if(r>=n)throw Error("Invalid byte index");var e=255&t[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,a;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(e=255&t[r],r++,0==(128&e))return e;if(192==(224&e)){if((a=(31&e)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if((a=(15&e)<<12|l()<<6|l())>=2048)return i(a),a;throw Error("Invalid continuation byte")}if(240==(248&e)&&(a=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=o(e),n=t.length,r=-1,a="";++r<n;)a+=c(t[r]);return a},e.decode=function(e){t=o(e),n=t.length,r=0;for(var i,s=[];!1!==(i=d());)s.push(i);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)(t=e[r])>65535&&(o+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=a(t);return o}(s)}}(t)}},function(e){e.O(0,[6368,9774,2888,179],(function(){return t=85313,e(e.s=t);var t}));var t=e.O();_N_E=t}]);